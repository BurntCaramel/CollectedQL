function e(e){for(var n=[],r=new DataView(e),t=0;t<r.byteLength;t+=4){var o=("00000000"+r.getUint32(t).toString(16)).slice(-"00000000".length);n.push(o)}return n.join("")}function n(e){var n=e.map(function(e){return function(e,n){if("string"==typeof e)return console.log("is string"),function(r){return r===e?n:null};if(e instanceof RegExp)return console.log("is regex"),function(r){var t=e.exec(r);return null==t?null:function(){return n.apply(void 0,t)}};throw new Error("Invalid pattern "+e)}(e[0],e[1])});return function(e){var r=null;return n.some(function(n){var t=n(e);return!!t&&(r=t,!0)}),r||function(){throw new Error("No function found matching "+e)}}}function r(e){return JSON.stringify(e,null,"  ")}var t={eq:Object.assign(function(e,n){return e==n},{expectation:"to equal"})};function o(e,n,t){if(!n(e,t))throw new Error("Expected "+r(e)+" "+n.expectation+" "+r(t))}function i(e,n){try{n(),console.error("✅ ",e)}catch(n){throw console.error("❌ ",e),n}}var u=function(r){var t=r.request;return[n([["Viewer.ipAddress",function(){return t.headers.get("CF-Connecting-IP")}],[/^"(.*)"$/,function(e,n){return n}]]),function(n){return{"Fetch.get":function(e){try{return Promise.resolve(fetch("https://"+e))}catch(e){return Promise.reject(e)}},"Fetch.body":function(e){try{return Promise.resolve(e.body)}catch(e){return Promise.reject(e)}},sha256:function(n){try{function r(n){return Promise.resolve(crypto.subtle.digest("SHA-256",t)).then(e)}var t,o=function(){if(n&&"function"==typeof n.getReader){var e=[],r=n.getReader();return Promise.resolve(r.read().then(function n(t){if(!t.done)return e.push(t.value),r.read().then(n)})).then(function(){t=new Uint8Array(e)})}if("string"!=typeof n)throw"Digest must be passed valid data type";t=new TextEncoder("utf-8").encode(n)}();return Promise.resolve(o&&o.then?o.then(r):r())}catch(e){return Promise.reject(e)}}}[n]}]}({request:{headers:{get:function(e){if("CF-Connecting-IP"===e)return"1.2.3.4"}}}});i("returns the ip address from the request",function(){o(u[0]("Viewer.ipAddress")(),t.eq,"1.2.3.4")}),i("returns a string",function(){o(u[0]('"hello"')(),t.eq,"hello")});
//# sourceMappingURL=piping.mjs.map
